<!DOCTYPE html>
<html>
<head>
    <link rel="manifest" href="manifest.json">
    <link rel="shortcut icon" href="image/png" type="images/favicon.co" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>峰 web share target</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <link rel="stylesheet" type="text/css" media="screen" href="main.css" /> -->
    <!-- <script src="main.js"></script> -->

    <script>

        function callAndDisplayAnagrams(){
            // var xhr = new XMLHttpRequest();
            // xhr.open("POST", "http://www.anagramica.com/best/:dormitory", true);
            // xhr.setRequestHeader("Content-type", "application/json");
            // xhr.send();
            // var response = JSON.parse(xhr.responseText);

            // Console.log(response);
            
            document.getElementById("Anagrams").innerHTML = "Yes?";
            // halted, the api only serves via http, not https
        }
    </script>

</head>
<body>
  <div>Yes, it does change.</div>
        <h1>Web Share Target Test App</h1>
        <div id="output"></div>
        <p>This is a test app for the <a href="https://github.com/WICG/web-share-target">Web
        Share Target API</a>. It will only work in browsers that have implemented the
        draft proposal. At the time of writing, this works with:</p>
        <ul>
          <li>Google Chrome for Chrome OS, Windows, or Linux, with
            chrome://flags#enable-experimental-web-platform-features enabled.
            <ul>
              <li>To "register" this app with Google Chrome, click the Chrome menu
                &rarr; More tools &rarr; Add to desktop/shelf (you can cancel the
                dialog; this just forces the manifest to download). Then it should
                show up as a target when using <a href="https://github.com/WICG/web-share">Web
                Share</a> (<a href="https://wicg.github.io/web-share/demos/share.html">demo
                site</a>).
              </li>
            </ul>
          </li>
          <li>Google <a
              href="https://play.google.com/store/apps/details?id=com.chrome.dev">Chrome
              Dev</a> or <a
            href="https://play.google.com/store/apps/details?id=com.chrome.canary">Chrome
            Canary</a> for Android.
            <ul>
              <li>To "register" this app with the Android OS, click the Chrome menu
                &rarr; Add to home screen. Then it should show up as a target when
                sharing from any other Android app (including Web Share).
              </li>
            </ul>
          </li>
        </ul>
      


    <h1>峰 web share target</h1>

    <textarea name="input" id="input" cols="30" rows="1"></textarea>
    <button type="submit" onclick="callAndDisplayAnagrams()">Anagram it!</button>

    <div id="Anagrams"></div>

    <script>
            'use strict';
        
            if ('serviceWorker' in navigator) {
              navigator.serviceWorker.register('sw.js').then(registration => {
                console.log('ServiceWorker registration successful with scope:',
                            registration.scope);
              }).catch(err => {
                console.error('ServiceWorker registration failed:', err);
              });
            }
        
            function logText(message, isError) {
              if (isError)
                console.error(message);
              else
                console.log(message);
              var p = document.createElement('p');
              if (isError)
                p.setAttribute('class', 'error');
              document.querySelector('#output').appendChild(p);
              p.appendChild(document.createTextNode(message));
            }

            function logImage(message, isError) {
              if (isError)
                console.error(message);
              else
                console.log(message);
              var p = document.createElement('p');
              if (isError)
                p.setAttribute('class', 'error');
              document.querySelector('#output').appendChild(p);
              p.appendChild("<img href");
            }
        
            function onLoad() {
              var parsedUrl = new URL(window.location.toString());
              logText("Title shared: " + parsedUrl.searchParams.get("title"));
              logText("Text shared: " + parsedUrl.searchParams.get("text"));
              logText("URL shared: " + parsedUrl.searchParams.get("url"));

              logImage(parsedUrl.searchParams.get("image"));
            }
        
            window.addEventListener('load', onLoad);
          </script>
        

</body>
</html>