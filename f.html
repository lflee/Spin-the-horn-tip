<!DOCTYPE html>
<html>
<head>
    <link rel="manifest" href="manifest.json">
    <link rel="shortcut icon" href="image/png" type="images/favicon.co" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>峰 web share target</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <script src="main.js"></script>

    <script>

        function callAndDisplayAnagrams(){
            // var xhr = new XMLHttpRequest();
            // xhr.open("POST", "http://www.anagramica.com/best/:dormitory", true);
            // xhr.setRequestHeader("Content-type", "application/json");
            // xhr.send();
            // var response = JSON.parse(xhr.responseText);

            // Console.log(response);
            
            document.getElementById("Anagrams").innerHTML = "Yes?";
            // halted, the api only serves via http, not https
        }
    </script>

</head>
<body>
    <h1>峰 web share target</h1>

    <textarea name="input" id="input" cols="30" rows="1"></textarea>
    <button type="submit" onclick="callAndDisplayAnagrams()">Anagram it!</button>

    <div id="Anagrams"></div>

    <script>
            'use strict';
        
            if ('serviceWorker' in navigator) {
              navigator.serviceWorker.register('sw.js').then(registration => {
                console.log('ServiceWorker registration successful with scope:',
                            registration.scope);
              }).catch(err => {
                console.error('ServiceWorker registration failed:', err);
              });
            }
        
            function logText(message, isError) {
              if (isError)
                console.error(message);
              else
                console.log(message);
              var p = document.createElement('p');
              if (isError)
                p.setAttribute('class', 'error');
              document.querySelector('#output').appendChild(p);
              p.appendChild(document.createTextNode(message));
            }
        
            function onLoad() {
              var parsedUrl = new URL(window.location.toString());
              logText("Title shared: " + parsedUrl.searchParams.get("title"));
              logText("Text shared: " + parsedUrl.searchParams.get("text"));
              logText("URL shared: " + parsedUrl.searchParams.get("url"));
            }
        
            window.addEventListener('load', onLoad);
          </script>
        

</body>
</html>